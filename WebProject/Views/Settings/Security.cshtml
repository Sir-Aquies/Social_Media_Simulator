@model PasswordUser
@{
	ViewData["Title"] = "Passwords and Security";
}

<link rel="stylesheet" href="~/css/HomePageCSS.css" asp-append-version="true"/>
<link rel="stylesheet" href="~/css/FormsCSS.css" asp-append-version="true" />
<link rel="stylesheet" href="~/css/SettingsCSS.css" asp-append-version="true" />

<div class="box-container">
	<div class="top-box">
		<partial name="SettingsActions"></partial>
	</div>

	<hr style="margin: 0.5rem" />

	<div class="center-box">
		<label>Change password</label>
		<hr style="margin: 0.5rem" />

		<form method="post">
			<div asp-validation-summary="All" class="text-danger"></div>
			<div class="field-container">
				<label>Old Password</label>
				<input asp-for="OldPassword"/>
				<span asp-validation-for="OldPassword" class="text-danger"></span>

				<label>New password</label>
				<input asp-for="NewPassword" />
				<span asp-validation-for="NewPassword" class="text-danger"></span>

				<label>Confirm new password</label>
				<input asp-for="ConfirmNewPassword"/>
				<span asp-validation-for="ConfirmNewPassword" class="text-danger"></span>
			</div>

			<div class="settings-button">
				<input type="submit" value="Update password" class="button-edit"/>
			</div>
		</form>

		<br style="margin: 0.5rem;"/>

		<label>Change email address</label>
		<hr style="margin: 0.5rem" />
		
		<label>Current email address: </label>
		<label><b>@Model.User.Email</b></label>

		<br style="margin: 0.5rem;"/>

		<form method="post" action="ChangeEmail" id="myform">
			<div class="field-container input-settings">
				<label>New email address</label>
				<input name="Email" />
			</div>

			<div class="settings-button">
				<input type="submit" value="Update email address" class="button-edit" form="myform" />
			</div>
		</form>
	</div>
</div>

@section Scripts {
	@{
		await Html.RenderPartialAsync("_ValidationScriptsPartial");
	}
}
<script>
	const Message = document.getElementById("MessageSuccess");
	if (Message) {
		setInterval(function () { Message.style.display = "none" }, 30000);
	}
</script>