@model UserModel
@{
	ViewData["Title"] = "Edit Profile";
}

<link rel="stylesheet" href="~/css/HomePageCSS.css" asp-append-version="true" />
<link rel="stylesheet" href="~/css/FormsCSS.css" asp-append-version="true" />
<link rel="stylesheet" href="~/css/SettingsCSS.css" asp-append-version="true" />

<div class="box-container">
	<div class="top-box">
		<partial name="SettingsActions"></partial>
	</div>

	<hr style="margin: 0.5rem 0" />

	<div class="center-box">
		<form method="post" enctype="multipart/form-data">
			<input type="hidden" name="Id" value="@Model.Id" />

			<div class="field-container">
				<label>Username</label>
				<input name="UserName" value="@Model.UserName" />
				<span asp-validation-for="UserName" class="text-danger"></span>

				<label>Name</label>
				@if (!string.IsNullOrEmpty(Model.Name))
				{
					<input name="Name" value="@Model.Name" />
				}
				else
				{
					<input name="Name" />
				}
				<span asp-validation-for="Name" class="text-danger"></span>

				<label>Description</label>
				<textarea name="Description">@if(!string.IsNullOrEmpty(Model.Description)){@Model.Description;}</textarea>

				<span asp-validation-for="Description" class="text-danger"></span>
			</div>

			<div class="settings-pic-frame">
				@if (Model.ProfilePicture != null)
				{
					<img src="data:image/png;base64,@Model.ProfilePicture" id="SettingsFrame" />
				}
				else
				{
					<img src="" id="SettingsFrame" />
				}
				<input type="button" value="Edit Picture" onclick="FakeCall()" class="button-edit" />
				<input type="file" id="Settingsfile" name="ProfilePicture" accept=".jpg, .png, .jpeg, .gif, .bmp, .tif, .tiff|image/*" onchange="SettingImagePreview(this)" style="display:none;" />
			</div>

			<div class="settings-button">
				<p>For changing the password and email address check "Passwords and Security".</p>
				<input type="submit" value="Update profile" class="button-edit" />
			</div>
		</form>
	</div>
</div>

<script src="~/js/ImagePrev.js" asp-append-version="true"></script>

<script>
	const Message = document.getElementById("MessageSuccess");
	if (Message){
		setInterval(function() {Message.style.display = "none"}, 30000);
	}
</script>

@section Scripts {
	@{
		await Html.RenderPartialAsync("_ValidationScriptsPartial");
	}
	}